<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipt</title>

</head>

<style>
    body {
        width: 297mm;
        height: 200mm;
        writing-mode: horizontal-tb;
        margin: 100px 10px 10px -10px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        font-size: 20px;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        width: 290mm;
        height: 2%;
        position: relative;
    }

    .header2 {
        position: relative;
        width: 297mm;
        top: 9%;
        height: 2%;
        justify-content: space-between;
        align-items: flex-start;

        display: flex;
    }

    .customer_info {
        position: relative;
        left: 12%;
    }

    .customer_info_arabic {
        position: relative;
        left: 35%;
        direction: rtl;
        line-height: 0.5;
    }

    .invoicenumber {
        position: relative;
        left: 15%;
    }

    .invoicedate {
        position: relative;
        top: 20%;
    }

    .payment_terms {
        align-items: left;
        position: relative;
        left: 20%;
    }

    .customer_number {
        position: relative;
        left: 32%;
    }

    .place_of_delivery {
        position: relative;
        left: 38%;
    }

    .sales_man {
        position: relative;
        left: 38%;
    }

    ol {
        list-style-type: none;
    }

    .line_items {
        position: relative;
        top: 18%;
        left: 0%;
        width: 290mm;
        height: 10%;
    }

    .line_items ol li {
        position: relative;
        height: 20px;
    }

    .serial_number {
        position: relative;
        left: 3%;
    }

    .item_name {
        position: relative;
        left: 6.3%;
        width: 35%;
    }

    .item_name_arabic {
        position: relative;
        left: 30%;
        width: 30%;
        direction: rtl;
        text-align: right;
    }

    .quantity {
        position: relative;
        left: 36%;
    }

    .unit_price {
        position: relative;
        left: 42%;
    }

    .unit {
        position: relative;
        left: 48%;
    }

    .vat_amount {
        position: relative;
        left: 52%;
    }

    .total_value {
        position: relative;
        left: 56%;
    }

    .footer {
        position: relative;
        top: 87%;
        left: 2%;
        width: 290mm;
    }

    .qrcode {
        height: 100px;
        width: 100px;
        vertical-align: right;
        float: left;
        bottom: 0;
        margin-left: 1%;
        margin-top: 1%;
    }

    .total_english {
        vertical-align: text-top;
        position: relative;
        left: 15%;
        width: 25%;
        font-size: 13px;
    }

    .total_arabic {
        vertical-align: text-top;
        margin-left: 10px;
        direction: rtl;
        position: relative;
        left: 25%;
        width: 25%;
        font-size: 13px;
    }

    .footer_child {
        position: relative;
        top: 5%;
        left: 10%;
        width: 100%;
    }

    .delivery_date {
        position: relative;
        left: 15%;
        font-size: 15px;
    }

    .cases {
        position: relative;
        top: 5.3%;
        left: 60%;
    }

    .weight {
        position: relative;
        top: 5.3%;
        left: 80%;
    }

    .footer_net {
        position: relative;
        top: 0%;
        left: 40.3%;
        text-align: right;
        /*height: 100%;*/
    }

    .footer_net span {
        display: block;
        position: relative;
    }

    .amount_untaxed {
        position: relative;
        top: 0%;
        left: 85%;
    }

    .amount_discount {
        position: relative;
        top: 5.3%;
        left: 106%;

    }

    .amount_tax {
        position: relative;
        top: 13%;


    }

    .vat_percent {
        position: relative;
        top: 13%;

    }

    .amount_total {
        position: relative;
        top: 15%;

    }
</style>

<body>
    <% var itemsPerPage = 17; %>
    <% var numPages = Math.ceil(line_items.length / itemsPerPage); %>
    <% for(var i = 0; i < numPages; i++) { %>
        <!-- Print the header on each page -->
    <div class="header">
        <div class="customer_info">
            <p class="customer_name"><%= partner_name %></p>
            <p class="customer_address"><%= address %></p>
        </div>
        <div class="invoicenumber">
            <p><%= invoice_no %></p>
            <p><%= date %></p>
        </div>
        <div class="customer_info_arabic">
            <p class="customer_name_arabic"><%= partner_name_arabic %></p>
            <p class="customer_address_arabic"><%= address_arabic %></p>
        </div>

    </div>
    <div class="header2">

        <p class="payment_terms"><%= payment_terms %></p>
        <p class="customer_number"><%= customer_no %></p>
        <p class="place_of_delivery"><%= place_of_delivery %></p>
        <p class="sales_man"><%= sales_man %></p>


    </div>
    <div class="line_items">
        <ol>
            <% var start = i * itemsPerPage; %>
            <% var end = Math.min(start + itemsPerPage, line_items.length); %>
            <% for(var j = start; j < end; j++) { %>
                <% var item = line_items[j]; %>
                <li style="display: flex;">
                    <p class="serial_number"><%= item.sl_no %>.</p>
                    <p class="item_name"><%= item.product_name %> </p>
                    <p class="item_name_arabic"><%= item.product_name_arabic %></p>
                    <p class="quantity"><%= item.quantity %></p>
                    <p class="unit_price"><%= item.unit_price %></p>
                    <p class="unit"><%= item.uom %></p>
                    <p class="vat_amount"><%= item.tax_amount %></p>
                    <p class="total_value"><%= item.total_amount %></p>
                </li>
            <% } %>
        </ol>
    </div>

    <% if(i < numPages - 1) { %>
        <div style="page-break-after: always;"></div>
      <% } %>

    <!-- If this is the last page, print the footer -->
    <% if(i === numPages - 1) { %>
    <div class="footer">
        <div>
            <img class="qrcode" alt="Logo" src="<%= qrcode_url  %>">
            <span class="total_english"><%= amount_in_words %></span>
            <span class="total_arabic"><%= amount_in_words_arabic %></span>
            <span class="amount_untaxed"><%= amount_untaxed %></span>

        </div>
        <div class="footer_child">
            <span class="delivery_date"><%= delivery_date %></span>
            <span class="cases"><%= total_case %></span>
            <span class="weight"><%= total_weight %></span>
            <span class="amount_discount"><%= amount_discount %></span>

        </div>
        <div class="footer_net">
            <p class="amount_tax"><%= amount_tax %></p>
            <p class="vat_percent">0</p>
            <p class="amount_total"><%= amount_total %></p>
        </div>
    </div>
    <% } %>

    <% } %>
</body>

</html>