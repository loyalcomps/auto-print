<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipt</title>
</head>
<style>
    body {
        width: 297mm;
        height: 210mm;
        margin: 50px auto 0;
        display: flex;
        flex-direction: column;
    }

    .header {
        display: flex;
        justify-content: space-between;
        width: 100%;
    }

    .customer_info,
    .customer_info_arabic,
    .invoice_data {
        width: 30%;
    }

    .header_bottom {
        display: flex;
        justify-content: space-between;
        width: 100%;
    }

    .line_items {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .line_items li {
        flex: 1 0 21%;
        /* flex-grow | flex-shrink | flex-basis */
        margin: 1%;
        /* Optional for some space between items */
    }

    .line_items li p {
        margin: 0;
        /* Remove any default margins */
        padding: 5px 0;
        /* Add some vertical padding */
        font-size: 14px;
        /* Set the font size */
        color: #333;
        /* Set the font color */
    }


    .footer {
        width: 100%;
        display: flex;
        justify-content: space-between;
    }

    .footer_child,
    .footer_net {
        flex: 1 0 21%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .qrcode {
        height: 100px;
        width: 100px;
    }
</style>

<body>

    <% var itemsPerPage=17; %>
        <% var numPages=Math.ceil(line_items.length / itemsPerPage); %>
            <% for(var i=0; i < numPages; i++) { %>
                <!-- Print the header on each page -->
                <div class="header">
                    <p class="customer_name">
                        <%= partner_name %>
                    </p>
                    <p class="customer_address">
                        <%= address %>
                    </p>
                    <p id="invoicenumber">
                        <%= invoice_no %>
                    </p>
                    <p id="invoice_date">
                        <%= date %>
                    </p>
                    <p class="customer_name_arabic">
                        <%= partner_name_arabic %>
                    </p>
                    <p class="customer_address_arabic">
                        <%= address_arabic %>
                    </p>
                    <p class="payment_terms">
                        <%= payment_terms %>
                    </p>
                    <p class="customer_number">
                        <%= customer_no %>
                    </p>
                    <p class="place_of_delivery">
                        <%= place_of_delivery %>
                    </p>
                    <p class="sales_man">
                        <%= sales_man %>
                    </p>
                </div>





                <div class="line_items">
                    <ol>
                        <% var start=i * itemsPerPage; %>
                            <% var end=Math.min(start + itemsPerPage, line_items.length); %>
                                <% for(var j=start; j < end; j++) { %>
                                    <% var item=line_items[j]; %>
                                        <li style="display: flex;">
                                            <p class="serial_number">
                                                <%= item.sl_no %>.
                                            </p>
                                            <p class="item_name">
                                                <%= item.product_name %>
                                            </p>
                                            <p class="item_name_arabic">
                                                <%= item.product_name_arabic %>
                                            </p>
                                            <p class="quantity">
                                                <%= item.quantity %>
                                            </p>
                                            <p class="unit_price">
                                                <%= item.unit_price %>
                                            </p>
                                            <p class="unit">
                                                <%= item.uom %>
                                            </p>
                                            <p class="vat_amount">
                                                <%= item.tax_amount %>
                                            </p>
                                            <p class="total_value">
                                                <%= item.total_amount %>
                                            </p>
                                        </li>
                                        <% } %>
                    </ol>
                </div>

                <% if(i < numPages - 1) { %>
                    <div style="page-break-after: always;"></div>
                    <% } %>
                        <!-- If this is the last page, print the footer -->
                        <% if(i===numPages - 1) { %>
                            <div class="footer">
                                <div>
                                    <img class="qrcode" alt="Logo" src="<%= qrcode_url  %>">
                                    <span class="total_english">
                                        <%= amount_in_words %>
                                    </span>
                                    <span class="total_arabic">
                                        <%= amount_in_words_arabic %>
                                    </span>
                                </div>
                                <div class="footer_child">
                                    <span class="delivery_date">
                                        <%= delivery_date %>
                                    </span>
                                    <span class="cases">
                                        <%= total_case %>
                                    </span>
                                    <span class="weight">
                                        <%= total_weight %>
                                    </span>
                                </div>
                                <div class="footer_net">
                                    <span class="amount_untaxed">
                                        <%= amount_untaxed %>
                                    </span>
                                    <span class="amount_discount">
                                        <%= amount_discount %>
                                    </span>
                                    <span class="amount_tax">
                                        <%= amount_tax %>
                                    </span>
                                    <span class="vat_percent">0</span>
                                    <span class="amount_total">
                                        <%= amount_total %>
                                    </span>
                                </div>
                            </div>
                            <% } %>

                                <% } %>

</body>

</html>